"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function n(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function i(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(o){o.preventDefault();let r=function(e){let s=0,a=document.querySelectorAll("._req");for(let e=0;e<a.length;e++){const o=a[e];n(o),o.classList.contains("_email")?i(o)&&(t(o),s++,o.placeholder="Заполните это поле"):"checkbox"===o.getAttribute("type")&&!1===o.checked?(t(o),s++):""===o.value&&(t(o),s++,o.placeholder="Заполните это поле")}return s}(),l=new FormData(e);if(l.append("image",s.files[0]),0===r){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:l});if(t.ok){let n=await t.json();alert(n.message),a.innerHTML="",e.reset()}else alert("Ошибка отправки формы")}}));const s=document.getElementById("formImage"),a=document.getElementById("formPreview");s.addEventListener("change",()=>{!function(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type)){let e=document.getElementById("typeTooltip");return e.classList.add("_active"),setTimeout(()=>{e.classList.remove("_active")},4e3),void(s.value="")}if(e.size>2097152){let e=document.getElementById("sizeTooltip");return e.classList.add("_active"),void setTimeout(()=>{e.classList.remove("_active")},4e3)}var t=new FileReader;t.onload=function(e){a.innerHTML=`<img src="${e.target.result}" alt="foto">`},t.onerror=function(e){let t=document.getElementById("fileTooltip");t.classList.add("_active"),setTimeout(()=>{t.classList.remove("_active")},4e3)},t.readAsDataURL(e)}(s.files[0])})}));